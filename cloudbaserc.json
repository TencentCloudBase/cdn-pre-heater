{
  "version": "2.0",
  "envId": "lowcode-1gxvnos61f22b18b",
  "$schema": "https://framework-1258016615.tcloudbaseapp.com/schema/latest.json",
  "functionRoot": "./functions",
  "functions": [
    {
      "name": "cdn-pre-heater",
      "timeout": 30,
      "runtime": "Nodejs10.15",
      "memorySize": 1024,
      "triggers": [
        { "name": "trigger", "type": "timer", "config": "0 */5 8-20 * * * *" }
      ],
      "handler": "index.main"
    }
  ],
  "framework": {
    "name": "cdn-pre-heater",
    "plugins": {
      "function": {
        "use": "@cloudbase/framework-plugin-function",
        "inputs": {}
      }
    },
    "requirement": {
      "environment": {
        "WEDA_DEFAULT_DOMAIN": {
          "description": "微搭应用默认域名，例如 lowcode-1gxvnos61f22b18b-1311711383.tcloudbaseapp.com          ",
          "required": true,
          "default": "lowcode-1gxvnos61f22b18b-1311711383.tcloudbaseapp.com",
          "validation": {
            "rule": {
              "type": "RegExp",
              "pattern": "^[a-zA-Z0-9.-]+.tcloudbaseapp.com$",
              "flag": "g"
            },
            "errorMessage": "域名格式不正确"
          }
        },
        "WEDA_APP_IDS": {
          "description": "微搭应用 ID列表，用英文逗号隔开,例如 例如 app-jzaQSTEk,app-jzaQSTE1",
          "required": true,
          "default": "app-jzaQSTEk,app-jzaQSTE1",
          "validation": {
            "rule": {
              "type": "RegExp",
              "pattern": "(^$)|(^app-[a-zA-Z0-9-]+(,app-[a-zA-Z0-9-]+)*$)",
              "flag": "g"
            },
            "errorMessage": "需要用英文逗号隔开, 同时需要满足格式要求,例如 app-jzaQSTEk,app-jzaQSTE1"
          }
        },
        "SECRET_ID": {
          "description": "子账号 SECRETID，需要有cdn的接口权限",
          "required": true
        },
        "SECRET_KEY": {
          "description": "子账号 SECRETKEY，需要有cdn的接口权限",
          "required": true
        },
        "OTHER_URL": {
          "description": "其他需要预热的cdn地址，用英文逗号隔开",
          "required": false
        }
      }
    }
  }
}
